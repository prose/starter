title: 一个闭包还是三个闭包？
tags:
  - 闭包
id: 2330
categories:
  - JavaScript
date: 2013-02-12 22:35:59
---

![2013-01-24_133245](http://blog.kainy.cn/wp-content/uploads/2013/01/2013-01-24_133245-300x155.png)

截自：http://coolshell.cn/articles/6731.html[
](http://blog.kainy.cn/wp-content/uploads/2013/01/2013-01-24_133156.png)

<!--more-->

![2013-01-24_133156](http://blog.kainy.cn/wp-content/uploads/2013/01/2013-01-24_133156-300x176.png)

截自：https://developer.mozilla.org/zh-CN/docs/JavaScript/Guide/Closures#Creating_closures_in_loops_A_common_mistake

同样是循环中赋值函数，MDN解释中说“创建了三个闭包”而酷壳的文章说“绑定了同一个闭包”。

结合上下文，前者解释为三个<span style="color: #99cc00;" data-mce-mark="1">闭包</span>共享同一<span style="color: #3366ff;" data-mce-mark="1">环境</span>，而后者解释为三个<span style="color: #99cc00;" data-mce-mark="1">函数</span>绑定同一<span style="color: #3366ff;" data-mce-mark="1">闭包。</span>

前者所谓<span style="color: #99cc00;">闭包</span>=后者所谓<span style="color: #99cc00;">函数</span>，后者所谓<span style="color: #3366ff;">闭包</span>=前者所谓<span style="color: #3366ff;">环境</span>（作用域里的变量）。

再看看[维基百科的说法 ](http://zh.wikipedia.org/zh-cn/%E9%97%AD%E5%8C%85_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6))
> **闭包**（_Closure_）是**词法闭包**（_Lexical Closure_）的简称，是引用了自由变量的函数。这个被引用的自由变量将和这个函数一同存在，即使已经离开了创造它的环境也不例外。所以，有另一种说法认为闭包是由函数和与其相关的引用环境组合而成的实体。
这样就比较明白了，闭包既包括函数也包括环境，所以两篇文章中的提法虽然貌似矛盾，其实也都是没错的。